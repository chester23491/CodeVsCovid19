<html>
<head>
<link rel="stylesheet" type="text/css" href="game/assets/css/style.css">
</head>  

<body>
<div class="parent">
<div class="pageCenter">
  <div>
    <input name="room" id="room" placeholder="Your Room">
  </div>
  <br>
  <br>
  <div>
    <input name="name" id="name" placeholder="Your Name">
  </div>
  <br>
  <br>
  <div>
    <button class="button" onclick="onSubmit()">Join Game</button>
  </div>
</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script>
  $.ajaxSetup({
      xhrFields: {
        withCredentials: true
      }
    });

function onSubmit() {
  var name = document.getElementById("name").value
  var room = document.getElementById("room").value


  $.post("api/?action=create_player&p_name="+name,
       function(data) {
         $.post("api/?action=join_game&room_name="+room,
          function(data){
            $.getJSON("api/?action=game_state",
                 function(data) {
                   console.log(data)
                   window.location = "game?id="+room
                 })
          })
   })
}

</script>
</body>
</html>
