<html>
<head>
<link rel="stylesheet" type="text/css" href="game/assets/css/style.css">
</head>  

<body>
<div class="parent">

<div class="corona">
<img src="game/assets/images/corona.png" alt="" width="50%" height="50%">
</div>
<div class="pageCenter">
  <div>
    <input name="room" id="room" placeholder="Your Room">
  </div>
  <br>
  <br>
  <div>
    <input name="name" id="name" placeholder="Your Name">
  </div>
  <br>
  <br>
  <div>
    <button class="button" onclick="onSubmit()">Join Game</button>
  </div>
</div>
<div class="topRight">
<font size="7" color="white">
<b>#CodeVsCOVID19</b>
</font>
</div>

<div class="bottomRight">
<font size="2" color="white">
Made by:<br>
<a href="https://kastgroup.com">Patrice Kast</a><br>
<a href="https://n.ethz.ch/~pascscha/">Pascal Sch&auml;rli</a><br>
<a href="https://yajm.ch">Yannick M&uuml;ller</a>
</font>
</div>
</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script>
  $.ajaxSetup({
      xhrFields: {
        withCredentials: true
      }
    });

function onSubmit() {
  var name = document.getElementById("name").value
  var room = document.getElementById("room").value


  $.post("api/?action=create_player&p_name="+name,
       function(data) {
         $.post("api/?action=join_game&room_name="+room,
          function(data){
            $.getJSON("api/?action=game_state",
                 function(data) {
                   console.log(data)
                   window.location = "game?id="+room
                 })
          })
   })
}

</script>
</body>
</html>
